# Production Environment Configuration
# Copy this file to .env.production and fill in actual production values
# IMPORTANT: Do NOT commit actual secrets to version control

# =====================================================
# Server Configuration
# =====================================================
NODE_ENV=production
PORT=3000
HOST=127.0.0.1

# =====================================================
# Security - CRITICAL CONFIGURATION
# =====================================================

# JWT Secret - MUST be a strong random string (minimum 32 characters)
# Generate with: openssl rand -base64 32
# DO NOT use the example value below - generate a new one for production
JWT_SECRET_FILE=/run/secrets/jwt_secret

JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# =====================================================
# File System Access Control
# =====================================================

# Whitelist of directories where Claude sessions can be created
# Multiple paths separated by colons (like PATH variable)
# CRITICAL: Only include directories that should be accessible
ALLOWED_PROJECT_ROOTS=/home/production/projects

# Whitelist of directories accessible via file explorer
# CRITICAL: Only include directories that should be accessible
ALLOWED_FILE_ROOTS=/home/production/projects

# =====================================================
# Database Configuration
# =====================================================

# Path to SQLite database file
# IMPORTANT: Must be on a volume that persists across container restarts
# RECOMMENDED: Use Docker volume or persistent storage
DB_PATH=/app/data/dashboard.db

# =====================================================
# Rate Limiting
# =====================================================

# Time window for rate limiting (milliseconds)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests allowed per window
RATE_LIMIT_MAX_REQUESTS=60

# =====================================================
# Session Management
# =====================================================

# Idle session timeout (milliseconds) - 4 hours
SESSION_IDLE_TIMEOUT_MS=14400000

# =====================================================
# Claude CLI Configuration
# =====================================================

# Path to Claude CLI home directory
CLAUDE_HOME=/root/.claude

# =====================================================
# ngrok Configuration (Remote Access)
# =====================================================

# IMPORTANT: ngrok is DISABLED by default (opt-in)
# Only enable if you need remote access and understand the security implications
ENABLE_NGROK=false

# ngrok authentication token
# Get from: https://dashboard.ngrok.com/auth
NGROK_AUTHTOKEN=

# ngrok basic auth credentials
# CRITICAL: Use strong password (minimum 12 characters)
NGROK_USER=admin
NGROK_PASS=

# ngrok region
NGROK_REGION=us

# =====================================================
# Logging Configuration
# =====================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=warn

# =====================================================
# Monitoring & Observability
# =====================================================

# Prometheus metrics endpoint port
PROMETHEUS_PORT=9090

# =====================================================
# CORS Configuration
# =====================================================

# Comma-separated list of allowed origins
# Leave empty for default (no CORS for production security)
CORS_ORIGINS=

# =====================================================
# HTTPS/TLS Configuration
# =====================================================

# Path to TLS certificate (if using HTTPS reverse proxy)
# TLS_CERT_PATH=/etc/ssl/certs/dashboard.crt
# TLS_KEY_PATH=/etc/ssl/private/dashboard.key

# =====================================================
# Production Recommendations
# =====================================================

# 1. Generate JWT_SECRET
#    openssl rand -base64 32 > .secrets/jwt_secret.txt
#    chmod 600 .secrets/jwt_secret.txt

# 2. Set restrictive file permissions
#    chmod 600 .env.production
#    chmod 600 .secrets/*

# 3. Use Docker secrets for sensitive values
#    docker secret create jwt_secret .secrets/jwt_secret.txt
#    docker secret create admin_password .secrets/admin_password.txt

# 4. For HTTPS, obtain certificate from Let's Encrypt
#    Use Nginx reverse proxy in front of application

# 5. Configure log rotation
#    Use docker-compose logging driver options:
#    - max-size: "10m"
#    - max-file: "3"

# 6. Set up monitoring
#    - Deploy Prometheus for metrics
#    - Deploy Grafana for visualization
#    - Configure alerting rules

# 7. Enable backup procedure
#    - Daily SQLite backups to persistent storage
#    - Off-site backup to S3 or equivalent

# 8. Regular security updates
#    - Update base Docker image weekly
#    - Run 'npm audit' and update dependencies monthly
